## 2022-05-09

Rustのサーバー実装してたら、同じcrateで別versionのdepsがあって、ハマった

https://stackoverflow.com/questions/70663707/rust-ndarray-mismatched-types

try_fromでconvertするようにしたけど、depsを一番下のversionに合わせて下げるほうが賢いかもしれない

---

sqldef、非常に良い感じなのだけど、issueを見つけてしまって、別案になりそう

https://github.com/k0kubun/sqldef/issues/233

手元にcloneして、test caseで遊んだ限りfunction callをCASTするのが駄目っぽい

sqlparserがMySQL用でGoのmysql packageからportされたものをpostgreSQL向けにも頑張ってカスタムしているっぽい

- https://github.com/k0kubun/sqldef/tree/v0.11.53/sqlparser
- https://github.com/k0kubun/sqldef/blob/v0.11.53/sqlparser/parser.y
- https://github.com/postgres/postgres/blob/f45f8b7ff3fe6c8b8139e177bb3fec7629ef9f05/src/backend/parser/gram.y

yacc分からん

postgresのgrammerはCallStmtで扱ってるのか、なるほど

postgresの`foo::int`、short syntaxなの初めて知った

SQL standardではCAST or CONVERT

https://stackoverflow.com/questions/13676816/postgres-data-type-cast/13676871#13676871

## 2022-05-10

LaravelでAPI書いてて、client errorで400と422を返すコードが混在していて 🤔 となったので調べた

ちなみに混在させたのはblameしたら自分だったよ...

https://stackoverflow.com/questions/16133923/400-vs-422-response-to-post-of-data

GitHubは400と422のどっちも使ってるけど、422はRFC的にはWebDAV extension用なので400の方が良さそう

WebDAVってなんやと思ったら、http拡張らしい

https://developer.mozilla.org/ja/docs/Glossary/WebDAV

---

Goで速いlexer書いた話読んだ

https://eli.thegreenplace.net/2022/a-faster-lexer-in-go/

Go 1.2と1.18で倍ぐらい速くなってるのすごい

Goのpprof便利そう

Goは雰囲気でしか分からんので、文字列はstringがimmutableで[]bytesがmutableなの初知り

GC friendlyにコードを書くの難しそう